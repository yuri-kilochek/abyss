#ifndef ABYSS_IMPL_INCL_VERSION_H
#define ABYSS_IMPL_INCL_VERSION_H

#include <abyss/impl/api.h>

#include <stdint.h>

#include <abyss/impl/prolog.h>
///////////////////////////////////////////////////////////////////////////////

typedef uint_least32_t abyss_version_t;

#define ABYSS_COMPOSE_VERSION(major, minor, patch) \
    (((major) & UINT32_C(0xFFF)) << UINT32_C(20) | \
     ((minor) & UINT32_C(0x3FF)) << UINT32_C(10) | \
     ((patch) & UINT32_C(0x3FF)))

#define ABYSS_VERSION_GET_MAJOR(version) \
    (((version) >> UINT32_C(20)) & UINT32_C(0xFFF))

#define ABYSS_VERSION_GET_MINOR(version) \
    (((version) >> UINT32_C(10)) & UINT32_C(0x3FF))

#define ABYSS_VERSION_GET_PATCH(version) \
    ((version) & UINT32_C(0x3FF))

#define ABYSS_INCLUDED_VERSION \
    ABYSS_COMPOSE_VERSION(${VERSION_MAJOR}, ${VERSION_MINOR}, ${VERSION_PATCH})

ABYSS_IMPL_API
abyss_version_t abyss_get_linked_version(void);

///////////////////////////////////////////////////////////////////////////////
#include <abyss/impl/epilog.h>

#endif
